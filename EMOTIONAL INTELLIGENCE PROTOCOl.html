<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMOTIONAL INTELLIGENCE PROTOCOL: A Path to Self-Mastery & Connectedness</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap');

        :root {
            --bg-dark: #10101c;
            --bg-medium: #1c1c2f;
            --panel-bg: #22223a;
            --text-light: #e0e0e0;
            --text-medium: #a0a0c0;
            --accent-blue: #00bcd4;
            --accent-green: #2ecc71;
            --highlight-red: #e74c3c;
            --glow-red: #ff0055; /* Challenges, negative emotions (managed) */
            --glow-blue: #00ffff; /* Emotional intelligence, positive outcomes */
            --glow-purple: #ff00ff;
            --border-color: #3f3f5a;
            --box-bg-normal: #333355;
            --box-bg-highlight: #444466;
            --grid-line-color: rgba(63, 63, 90, 0.3);
        }

        body {
            font-family: 'Share Tech Mono', monospace, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: var(--bg-dark);
            color: var(--text-light);
            padding: 20px;
            box-sizing: border-box;
            overflow-x: hidden;
        }

        .dashboard-header {
            width: 100%;
            max-width: 1200px;
            text-align: center;
            margin-bottom: 20px;
        }
        h1 {
            font-family: 'Orbitron', sans-serif;
            color: var(--glow-blue); /* Changed to glow-blue for positive theme */
            text-shadow: 0 0 10px var(--glow-blue), 0 0 20px var(--glow-blue);
            margin-bottom: 5px;
            letter-spacing: 3px;
            font-size: 2.5em;
        }
        p.subtitle {
            font-size: 0.9em;
            color: var(--text-medium);
            margin-bottom: 0;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .dashboard-main {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
            margin-bottom: 20px;
        }

        .dashboard-panel {
            background-color: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.1); /* Changed to reflect blue theme */
            padding: 15px;
            box-sizing: border-box;
            position: relative;
        }

        #flowchart-panel {
            min-height: 750px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #emotional-competency-log-panel {
            min-height: 750px;
            display: flex;
            flex-direction: column;
            font-size: 0.9em;
        }
        #emotional-competency-log-panel h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--accent-green); /* Positive theme accent */
            text-shadow: 0 0 5px var(--accent-green);
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px dashed var(--border-color);
        }
        #emotional-competency-log-text {
            color: var(--text-light);
            line-height: 1.6;
            overflow-y: auto;
            flex-grow: 1;
            padding-right: 5px;
        }
        #emotional-competency-log-text::-webkit-scrollbar {
            width: 8px;
        }
        #emotional-competency-log-text::-webkit-scrollbar-track {
            background: var(--bg-dark);
            border-radius: 10px;
        }
        #emotional-competency-log-text::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 10px;
        }
        #emotional-competency-log-text::-webkit-scrollbar-thumb:hover {
            background: var(--accent-green);
        }

        #flowchart-container {
            position: relative;
            width: 880px;
            height: 710px;
            display: block;
        }
        .flow-box {
            position: absolute;
            width: 250px;
            height: 150px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 0.9em;
            color: var(--text-light);
            box-sizing: border-box;
            transition: all 0.4s ease-in-out, box-shadow 0.6s ease-in-out;
            border: 2px solid var(--border-color);
            background-color: var(--box-bg-normal);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1;
            transform-style: preserve-3d;
        }
        .flow-box.highlight {
            border-color: var(--glow-blue); /* Changed to glow-blue for positive theme */
            box-shadow: 0 0 15px var(--glow-blue), 0 0 30px rgba(0, 255, 255, 0.4);
            transform: scale(1.05) rotateY(5deg);
            z-index: 10;
            background-color: var(--box-bg-highlight);
        }

        /* Positioning - unchanged, relative to #flowchart-container */
        #box-1 { top: 10px; left: 10px; }
        #box-2 { top: 10px; left: 310px; }
        #box-3 { top: 10px; left: 610px; }

        #box-4 { top: 240px; left: 10px; }
        #box-5 { top: 240px; left: 310px; }
        #box-6 { top: 240px; left: 610px; }

        #box-7 { top: 470px; left: 10px; }
        #box-8 { top: 470px; left: 310px; }
        #box-9 { top: 470px; left: 610px; }

        /* SVG Arrows */
        svg.arrows {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        .flow-arrow {
            stroke: var(--text-medium);
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
            transition: stroke 0.4s ease-in-out, stroke-width 0.4s ease-in-out, opacity 0.4s ease-in-out;
            opacity: 0.5;
        }
        .flow-arrow.highlight {
            stroke: var(--glow-blue); /* Changed to glow-blue */
            stroke-width: 4;
            opacity: 1;
            z-index: 5;
            filter: drop-shadow(0 0 5px var(--glow-blue));
        }
        #arrowhead polygon { fill: var(--text-medium); transition: fill 0.4s ease-in-out; }

        /* Icons inside boxes */
        .box-icon {
            margin-bottom: 5px;
            height: 60px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .box-icon svg {
            height: 100%;
            width: auto;
            max-width: 80%;
        }
        .box-icon svg path, .box-icon svg circle, .box-icon svg rect, .box-icon svg polygon, .box-icon svg line, .box-icon svg text {
            fill: var(--text-medium);
            stroke: none;
            transition: fill 0.4s ease-in-out, stroke 0.4s ease-in-out;
            transform-origin: center center;
            vector-effect: non-scaling-stroke;
        }
        .box-icon svg .stroke-element {
            stroke: var(--text-medium);
            stroke-width: 2px;
            fill: none;
            transition: stroke 0.4s ease-in-out;
        }
        
        .box-text, .small-text {
            font-weight: bold;
            margin-top: 5px;
            transition: color 0.4s ease-in-out;
            letter-spacing: 0.5px;
        }
        .small-text {
            font-size: 0.8em;
            color: var(--text-medium);
            font-weight: normal;
        }

        /* Highlight styles for contents of the highlighted box */
        .flow-box.highlight .box-icon svg .ei-element {
            fill: var(--glow-blue);
            stroke: var(--glow-blue);
        }
        .flow-box.highlight .box-icon svg .challenge-element {
            fill: var(--glow-red);
            stroke: var(--glow-red);
        }
        .flow-box.highlight .box-icon svg path:not([class]),
        .flow-box.highlight .box-icon svg circle:not([class]),
        .flow-box.highlight .box-icon svg rect:not([class]),
        .flow-box.highlight .box-icon svg polygon:not([class]),
        .flow-box.highlight .box-icon svg line:not([class]),
        .flow-box.highlight .box-icon svg text:not([class]),
        .flow-box.highlight .box-icon svg .stroke-element:not([class]) {
            fill: var(--text-light); /* Default elements become lighter */
            stroke: var(--text-light);
        }
        
        .flow-box.highlight .box-text {
            color: var(--glow-blue); /* Changed to glow-blue */
            text-shadow: 0 0 5px var(--glow-blue);
        }
        .flow-box.highlight .small-text {
            color: var(--accent-green); /* Changed to accent-green */
        }

        /* ANIMATIONS */
        .box-icon svg * { animation: none !important; } /* Reset all animations */

        /* 1. SELF-AWARENESS / EMOTIONAL RECOGNITION: Brain with lightbulb & emotion bubbles */
        @keyframes lightbulbGlow {
            0%, 100% { filter: drop-shadow(0 0 5px var(--glow-blue)); }
            50% { filter: drop-shadow(0 0 10px var(--glow-blue)); }
        }
        @keyframes emotionPop {
            0% { transform: translateY(10px) scale(0); opacity: 0; }
            50% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-10px) scale(0); opacity: 0; }
        }
        .flow-box.highlight #brain-outline { animation: none; }
        .flow-box.highlight #lightbulb { animation: lightbulbGlow 2s ease-in-out infinite alternate; }
        .flow-box.highlight #emotion-happy { animation: emotionPop 2s ease-out infinite; }
        .flow-box.highlight #emotion-sad { animation: emotionPop 2s 0.5s ease-out infinite; }

        /* 2. SELF-REGULATION / EMOTIONAL MANAGEMENT: Balanced scale with emotions */
        @keyframes scaleBalance {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(3deg); }
        }
        @keyframes emotionContain {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .flow-box.highlight #balanced-beam { animation: scaleBalance 2s ease-in-out infinite alternate; }
        .flow-box.highlight #emotion-left, .flow-box.highlight #emotion-right { animation: emotionContain 1.5s ease-in-out infinite alternate; }

        /* 3. MOTIVATION / EMOTIONAL DRIVE: Rocket launching towards a star */
        @keyframes rocketLaunch {
            0% { transform: translateY(0); }
            100% { transform: translateY(-20px); }
        }
        @keyframes starTwinkle {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .flow-box.highlight #motivated-rocket { animation: rocketLaunch 1.5s ease-out infinite; }
        .flow-box.highlight #goal-star { animation: starTwinkle 1s ease-in-out infinite alternate; }

        /* 4. EMPATHY / EMOTIONAL UNDERSTANDING: Connected heart and brain */
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        @keyframes brainActivity {
            0%, 100% { filter: drop-shadow(0 0 2px var(--glow-blue)); }
            50% { filter: drop-shadow(0 0 5px var(--glow-blue)); }
        }
        .flow-box.highlight #empathy-heart { animation: heartBeat 1s ease-in-out infinite alternate; }
        .flow-box.highlight #empathy-brain { animation: brainActivity 1.5s ease-in-out infinite alternate; }

        /* 5. SOCIAL SKILLS / RELATIONSHIP MANAGEMENT: Intertwined hands */
        @keyframes handsConnect {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(5deg); }
        }
        @keyframes linkPulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .flow-box.highlight #connected-hand-left, .flow-box.highlight #connected-hand-right { animation: handsConnect 2s ease-in-out infinite alternate; }
        .flow-box.highlight #connection-link { animation: linkPulse 1s ease-in-out infinite alternate; }

        /* 6. ACTIVE LISTENING / PERSPECTIVE INTEGRATION: Ear with expanding thought bubble */
        @keyframes soundWaveEnter {
            0% { transform: translateX(-10px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        @keyframes thoughtExpand {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .flow-box.highlight #listening-ear { animation: soundWaveEnter 0.5s ease-out forwards; }
        .flow-box.highlight #expanding-thought { animation: thoughtExpand 1.5s ease-in-out infinite alternate 0.5s; }
        #listening-ear { transform: translateX(-10px); opacity: 0; } /* Initial state */

        /* 7. CONFLICT RESOLUTION / HARMONY CULTIVATION: Merging arrows into harmony */
        @keyframes arrowMergeLeft {
            0% { transform: translateX(-15px); }
            100% { transform: translateX(0); }
        }
        @keyframes arrowMergeRight {
            0% { transform: translateX(15px); }
            100% { transform: translateX(0); }
        }
        @keyframes harmonyGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        .flow-box.highlight #arrow-left { animation: arrowMergeLeft 1s ease-out forwards; }
        .flow-box.highlight #arrow-right { animation: arrowMergeRight 1s ease-out forwards; }
        .flow-box.highlight #harmony-symbol { animation: harmonyGlow 1.5s ease-in-out infinite alternate 1s; }
        #arrow-left { transform: translateX(-15px); } /* Initial state */
        #arrow-right { transform: translateX(15px); } /* Initial state */
        #harmony-symbol { opacity: 0; } /* Initial state */


        /* 8. BUILDING RAPPORT / POSITIVE INFLUENCE: Two figures forming a bridge */
        @keyframes bridgeGrow {
            0% { width: 0; opacity: 0; }
            100% { width: 40px; opacity: 1; }
        }
        @keyframes figuresConnect {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-2px); }
        }
        .flow-box.highlight #figure-left { animation: figuresConnect 1.5s ease-in-out infinite alternate; }
        .flow-box.highlight #figure-right { animation: figuresConnect 1.5s 0.2s ease-in-out infinite alternate reverse; }
        .flow-box.highlight #connection-bridge { animation: bridgeGrow 1s ease-out forwards; }
        #connection-bridge { width: 0; opacity: 0; } /* Initial state */

        /* 9. FLOURISHING RELATIONSHIPS / RECIPROCAL GROWTH: Flourishing tree */
        @keyframes treeGrow {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes leavesFlutter {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(2deg); }
        }
        .flow-box.highlight #flourishing-tree-trunk { animation: treeGrow 1.5s ease-out forwards; }
        .flow-box.highlight #flourishing-tree-leaves { animation: treeGrow 1.5s 0.5s ease-out forwards, leavesFlutter 2s ease-in-out infinite alternate 2s; }
        #flourishing-tree-trunk, #flourishing-tree-leaves { transform: scale(0.8); opacity: 0; } /* Initial state */


        /* Controls */
        .dashboard-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 0;
            width: 100%;
            max-width: 1200px;
            background-color: var(--panel-bg);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            border: 1px solid var(--border-color);
        }
        button {
            padding: 12px 25px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            background-color: var(--accent-blue);
            color: var(--bg-dark);
            font-weight: bold;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        button:hover:not(:disabled) {
            background-color: var(--glow-blue);
            transform: translateY(-1px);
            box-shadow: 0 0 8px var(--glow-blue);
        }
        button:active:not(:disabled) {
            transform: translateY(0);
        }
        button:disabled {
            background-color: var(--border-color);
            color: var(--text-medium);
            cursor: not-allowed;
            box-shadow: none;
        }
        #currentStepText {
            color: var(--text-light);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="dashboard-header">
        <h1>EMOTIONAL INTELLIGENCE PROTOCOL: A PATH TO SELF-MASTERY & CONNECTEDNESS</h1>
        <p class="subtitle">MAPPING THE DEVELOPMENT OF EMOTIONAL COMPETENCIES FOR ENRICHED INTERACTIONS</p>
    </div>

    <div class="dashboard-main">
        <div id="flowchart-panel" class="dashboard-panel">
            <div id="flowchart-container">
                <!-- SVG for arrows -->
                <svg class="arrows" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" class="arrowhead-polygon" style="fill:var(--text-medium);" />
                        </marker>
                    </defs>
                    <!-- Top row horizontal arrows -->
                    <line id="arrow-1-2" class="flow-arrow" x1="270" y1="85" x2="310" y2="85" />
                    <line id="arrow-2-3" class="flow-arrow" x1="570" y1="85" x2="610" y2="85" />
                    
                    <!-- Mid row horizontal arrows -->
                    <line id="arrow-4-5" class="flow-arrow" x1="270" y1="315" x2="310" y2="315" />
                    <line id="arrow-5-6" class="flow-arrow" x1="570" y1="315" x2="610" y2="315" />

                    <!-- Bottom row horizontal arrows -->
                    <line id="arrow-7-8" class="flow-arrow" x1="270" y1="545" x2="310" y2="545" />
                    <line id="arrow-8-9" class="flow-arrow" x1="570" y1="545" x2="610" y2="545" />

                    <!-- Vertical arrows (connecting main column flow, visually) -->
                    <line id="arrow-3-vert-4" class="flow-arrow" x1="735" y1="160" x2="735" y2="240" />
                    <line id="arrow-6-vert-7" class="flow-arrow" x1="735" y1="390" x2="735" y2="470" />
                </svg>

                <!-- Flowchart Boxes -->
                <div id="box-1" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="brain-outline" d="M50 20 C70 20, 80 40, 80 50 C80 60, 70 80, 50 80 C30 80, 20 60, 20 50 C20 40, 30 20, 50 20 Z" fill="#2a2a4a" class="stroke-element"/>
                            <circle id="lightbulb" cx="50" cy="40" r="12" fill="yellow" stroke="yellow" stroke-width="2" class="ei-element"/>
                            <rect x="45" y="50" width="10" height="5" fill="yellow" class="ei-element"/>
                            <text id="emotion-happy" x="30" y="30" font-size="10" text-anchor="middle" fill="green" opacity="0">&#x263A;</text>
                            <text id="emotion-sad" x="70" y="70" font-size="10" text-anchor="middle" fill="red" opacity="0">&#x2639;</text>
                        </svg>
                    </div>
                    <div class="box-text">SELF-AWARENESS / EMOTIONAL RECOGNITION</div>
                </div>

                <div id="box-2" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <line id="balanced-beam" x1="20" y1="50" x2="80" y2="50" class="stroke-element" stroke-width="3"/>
                            <line x1="50" y1="50" x2="50" y2="20" class="stroke-element"/>
                            <rect id="emotion-left" x="25" y="55" width="20" height="10" fill="var(--glow-red)" class="challenge-element"/>
                            <rect id="emotion-right" x="55" y="55" width="20" height="10" fill="var(--glow-blue)" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">SELF-REGULATION / EMOTIONAL MANAGEMENT</div>
                    <div class="small-text">[INNER HARMONY]</div>
                </div>

                <div id="box-3" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="motivated-rocket" d="M50 80 L40 60 L60 60 L50 80 Z M45 60 A5 5 0 0 1 55 60 M40 60 L40 70 M60 60 L60 70" fill="var(--glow-blue)" class="ei-element"/>
                            <circle id="goal-star" cx="50" cy="30" r="10" fill="gold" stroke="gold" stroke-width="2" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">MOTIVATION / EMOTIONAL DRIVE</div>
                </div>

                <div id="box-4" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="empathy-heart" d="M30 60 C15 45, 35 20, 50 40 C65 20, 85 45, 70 60 L50 80 Z" fill="var(--glow-blue)" class="ei-element"/>
                            <path id="empathy-brain" d="M50 20 C70 20, 80 40, 80 50 C80 60, 70 80, 50 80 C30 80, 20 60, 20 50 C20 40, 30 20, 50 20 Z" fill="#2a2a4a" class="stroke-element"/>
                            <path d="M50 50 L50 55 M40 50 L60 50 M50 45 L40 35 L60 35 Z" fill="var(--text-light)" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">EMPATHY / EMOTIONAL UNDERSTANDING</div>
                    <div class="small-text">[SHARED PERSPECTIVE]</div>
                </div>

                <div id="box-5" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="connected-hand-left" d="M30 60 C25 60, 20 55, 30 55 C40 55, 35 60, 30 60 Z M30 65 L25 70 L35 70 Z" fill="var(--glow-blue)" class="ei-element"/>
                            <path id="connected-hand-right" d="M70 60 C65 60, 60 55, 70 55 C80 55, 75 60, 70 60 Z M70 65 L65 70 L75 70 Z" fill="var(--glow-blue)" class="ei-element"/>
                            <line id="connection-link" x1="35" y1="65" x2="65" y2="65" stroke="var(--glow-blue)" stroke-width="2" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">SOCIAL SKILLS / RELATIONSHIP MANAGEMENT</div>
                    <div class="small-text">[EFFECTIVE INTERACTION]</div>
                </div>

                <div id="box-6" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="listening-ear" d="M30 50 C25 40, 35 30, 45 40 C55 30, 65 40, 60 50 C55 60, 45 60, 40 50 L30 50 Z" fill="#2a2a4a" class="stroke-element"/>
                            <path id="sound-wave-1" d="M20 40 Q25 35 30 40" stroke="var(--glow-blue)" stroke-width="2" fill="none" class="ei-element"/>
                            <path id="sound-wave-2" d="M20 50 Q25 45 30 50" stroke="var(--glow-blue)" stroke-width="2" fill="none" class="ei-element"/>
                            <circle id="expanding-thought" cx="70" cy="45" r="10" fill="var(--glow-blue)" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">ACTIVE LISTENING / PERSPECTIVE INTEGRATION</div>
                    <div class="small-text">[DEEP COMPREHENSION]</div>
                </div>

                <div id="box-7" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <line id="arrow-left" x1="30" y1="40" x2="40" y2="50" stroke="var(--glow-red)" stroke-width="2" class="challenge-element"/>
                            <line id="arrow-right" x1="70" y1="40" x2="60" y2="50" stroke="var(--glow-red)" stroke-width="2" class="challenge-element"/>
                            <path id="harmony-symbol" d="M50 60 C45 60, 40 55, 50 55 C60 55, 55 60, 50 60 Z M50 65 L45 70 L55 70 Z" fill="var(--glow-blue)" class="ei-element" opacity="0"/>
                        </svg>
                    </div>
                    <div class="box-text">CONFLICT RESOLUTION / HARMONY CULTIVATION</div>
                </div>

                <div id="box-8" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <path id="figure-left" d="M30 65 C25 65, 20 60, 30 60 C40 60, 35 65, 30 65 Z M30 70 L25 75 L35 75 Z" fill="var(--text-medium)"/>
                            <path id="figure-right" d="M70 65 C65 65, 60 60, 70 60 C80 60, 75 65, 70 65 Z M70 70 L65 75 L75 75 Z" fill="var(--text-medium)"/>
                            <rect id="connection-bridge" x="30" y="55" height="5" fill="var(--glow-blue)" class="ei-element"/>
                        </svg>
                    </div>
                    <div class="box-text">BUILDING RAPPORT / POSITIVE INFLUENCE</div>
                    <div class="small-text">[TRUST & CONNECTION]</div>
                </div>

                <div id="box-9" class="flow-box">
                    <div class="box-icon">
                        <svg viewBox="0 0 100 100">
                            <rect id="flourishing-tree-trunk" x="45" y="55" width="10" height="25" fill="brown" class="ei-element" opacity="0"/>
                            <path id="flourishing-tree-leaves" d="M50 55 Q30 30 50 20 Q70 30 50 55 Z" fill="green" class="ei-element" opacity="0"/>
                        </svg>
                    </div>
                    <div class="box-text">FLOURISHING RELATIONSHIPS / RECIPROCAL GROWTH</div>
                </div>
            </div>
        </div>

        <div id="emotional-competency-log-panel" class="dashboard-panel">
            <h2>EMOTIONAL COMPETENCY LOG</h2>
            <div id="emotional-competency-log-text">
                <p>Welcome to the Emotional Intelligence Protocol Dashboard. This system analyzes the development and application of emotional competencies.</p>
                <p>Use the navigation controls below to observe each stage, from understanding your own feelings to fostering deeply connected and flourishing relationships.</p>
                <p><strong>Status:</strong> Awaiting Diagnostic Input.</p>
            </div>
        </div>
    </div>

    <div class="dashboard-controls">
        <button id="prevBtn" disabled>PREVIOUS STAGE</button>
        <button id="nextBtn">NEXT STAGE</button>
        <p id="currentStepText">STAGE <span id="currentStepNumber">0</span> OF <span id="totalStepsNumber"></span></p>
    </div>

    <script>
        const flowchartBoxes = [
            null, // Step 0 is just initial state, no box highlighted
            { id: 'box-1', arrow: null, description: '<h2>STAGE 1: SELF-AWARENESS / EMOTIONAL RECOGNITION</h2><p><strong>ANALYSIS:</strong> The foundational ability to recognize and understand one\'s own moods, emotions, drives, and their effects on others. It involves being attuned to internal states, understanding emotional triggers, and acknowledging personal strengths and limitations.</p><p><strong>MANIFESTATION:</strong> Clear perception of personal feelings as they happen, understanding why those feelings are occurring, recognizing their impact on thoughts and behavior, a candid view of one\'s capabilities.</p>' },
            { id: 'box-2', arrow: 'arrow-1-2', description: '<h2>STAGE 2: SELF-REGULATION / EMOTIONAL MANAGEMENT</h2><p><strong>ANALYSIS:</strong> The capacity to control or redirect disruptive impulses and moods. It involves thinking before acting, maintaining composure under stress, and taking responsibility for one\'s emotional responses. This is about choice, not suppression.</p><p><strong>MANIFESTATION:</strong> Managing frustrating situations without lashing out, pausing to respond thoughtfully rather than react impulsively, adapting to change with flexibility, maintaining integrity even under pressure.</p>' },
            { id: 'box-3', arrow: 'arrow-2-3', description: '<h2>STAGE 3: MOTIVATION / EMOTIONAL DRIVE</h2><p><strong>ANALYSIS:</strong> The ability to channel emotions constructively towards achieving goals. It\'s about having a passion for work or life beyond money or status, and pursuing goals with energy and persistence. This involves optimism and resilience in the face of setbacks.</p><p><strong>MANIFESTATION:</strong> Setting challenging goals and working hard to achieve them, maintaining a positive outlook even after failures, demonstrating initiative and commitment, being driven by a deeper sense of purpose.</p>' },
            { id: 'box-4', arrow: 'arrow-3-vert-4', description: '<h2>STAGE 4: EMPATHY / EMOTIONAL UNDERSTANDING</h2><p><strong>ANALYSIS:</strong> The skill of sensing, understanding, and sharing the feelings of others. It involves taking others\' perspectives, showing concern for their well-being, and appreciating diversity in emotional experience and cultural backgrounds.</p><p><strong>MANIFESTATION:</strong> Listening attentively to others\' concerns, accurately reading non-verbal cues, offering support when someone is struggling, anticipating others\' emotional reactions, effectively working with people from diverse backgrounds.</p>' },
            { id: 'box-5', arrow: 'arrow-4-5', description: '<h2>STAGE 5: SOCIAL SKILLS / RELATIONSHIP MANAGEMENT</h2><p><strong>ANALYSIS:</strong> Proficiency in managing relationships and building networks. It involves clear communication, active listening, inspiring and developing others, managing conflict, and collaborating effectively towards shared goals.</p><p><strong>MANIFESTATION:</strong> Building strong rapport with diverse individuals, effectively mediating disagreements, leading and inspiring teams, communicating complex ideas clearly, influencing and persuading others respectfully.</p>' },
            { id: 'box-6', arrow: 'arrow-5-6', description: '<h2>STAGE 6: ACTIVE LISTENING / PERSPECTIVE INTEGRATION</h2><p><strong>ANALYSIS:</strong> A critical sub-skill of social competence, involving fully concentrating on what is being said, both verbally and non-verbally, to truly understand the speaker\'s message, emotions, and underlying perspective without immediate judgment or formation of a response.</p><p><strong>MANIFESTATION:</strong> Asking clarifying questions, paraphrasing to confirm understanding, withholding advice until fully grasping the situation, acknowledging and validating the speaker\'s feelings, creating a safe space for expression.</p>' },
            { id: 'box-7', arrow: 'arrow-6-vert-7', description: '<h2>STAGE 7: CONFLICT RESOLUTION / HARMONY CULTIVATION</h2><p><strong>ANALYSIS:</strong> The ability to constructively handle disagreements and cultivate harmonious relationships. It involves understanding the root causes of conflict, seeking win-win solutions, and de-escalating tension through calm and empathetic communication.</p><p><strong>MANIFESTATION:</strong> Facilitating productive discussions between opposing parties, finding common ground, defusing heated arguments, fostering compromise and collaboration, turning disagreements into opportunities for stronger understanding.</p>' },
            { id: 'box-8', arrow: 'arrow-7-8', description: '<h2>STAGE 8: BUILDING RAPPORT / POSITIVE INFLUENCE</h2><p><strong>ANALYSIS:</strong> The art of establishing genuine connection and trust with others, leading to positive influence. This involves authentic engagement, finding shared interests, and subtly guiding interactions towards mutually beneficial outcomes through respect and understanding.</p><p><strong>MANIFESTATION:</strong> Quickly establishing ease and comfort in interactions, being seen as approachable and trustworthy, inspiring enthusiasm and commitment in others, skillfully advocating for ideas in a way that resonates with diverse audiences.</p>' },
            { id: 'box-9', arrow: 'arrow-8-9', description: '<h2>STAGE 9: FLOURISHING RELATIONSHIPS / RECIPROCAL GROWTH</h2><p><strong>ANALYSIS:</strong> The cumulative outcome of developed emotional intelligence. Relationships become characterized by mutual respect, understanding, support, and shared growth. This leads to personal fulfillment, strong teams, and effective communities.</p><p><strong>MANIFESTATION:</strong> Deep, lasting friendships and partnerships, highly functional and innovative teams, supportive family dynamics, a sense of belonging and well-being, environments where individuals feel heard, valued, and empowered to contribute their best.</p>' },
        ];

        let currentStep = 0;
        const totalSteps = flowchartBoxes.length - 1;

        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const emotionalCompetencyLogText = document.getElementById('emotional-competency-log-text');
        const currentStepNumber = document.getElementById('currentStepNumber');
        const totalStepsNumber = document.getElementById('totalStepsNumber');
        const arrowheadPolygon = document.querySelector('#arrowhead .arrowhead-polygon');

        totalStepsNumber.textContent = totalSteps;

        // Function to reset all animations and dynamic styles
        function resetAnimations() {
            // General reset for all SVG elements within boxes
            document.querySelectorAll('.box-icon svg *').forEach(el => {
                el.style.animation = ''; // Clear all animations
                el.style.filter = '';    // Clear all filters (like drop-shadow)
                el.style.transform = ''; // Clear all transforms
                el.style.opacity = '';   // Clear explicit opacity if set during animation
                el.style.strokeDasharray = ''; // Clear stroke dash array
                el.style.strokeDashoffset = ''; // Clear stroke dash offset
                // Specific for some icons starting with a default hidden state
                if (el.id === 'emotion-happy' || el.id === 'emotion-sad') {
                    el.style.opacity = 0;
                    el.style.transform = '';
                }
            });

            // Specific opacity/visibility/state resets for elements that are hidden by default or fade in/out
            // Box 1
            document.getElementById('lightbulb').style.filter = '';
            document.getElementById('emotion-happy').style.opacity = 0;
            document.getElementById('emotion-sad').style.opacity = 0;

            // Box 2
            document.getElementById('balanced-beam').style.transform = '';
            document.getElementById('emotion-left').style.transform = '';
            document.getElementById('emotion-right').style.transform = '';

            // Box 3
            document.getElementById('motivated-rocket').style.transform = '';
            document.getElementById('goal-star').style.opacity = 0.5;

            // Box 4
            document.getElementById('empathy-heart').style.transform = '';
            document.getElementById('empathy-brain').style.filter = '';

            // Box 5
            document.getElementById('connected-hand-left').style.transform = '';
            document.getElementById('connected-hand-right').style.transform = '';
            document.getElementById('connection-link').style.opacity = 0.5;

            // Box 6
            document.getElementById('listening-ear').style.transform = 'translateX(-10px)';
            document.getElementById('listening-ear').style.opacity = 0;
            document.getElementById('expanding-thought').style.transform = '';

            // Box 7
            document.getElementById('arrow-left').style.transform = 'translateX(-15px)';
            document.getElementById('arrow-right').style.transform = 'translateX(15px)';
            document.getElementById('harmony-symbol').style.opacity = 0;

            // Box 8
            document.getElementById('figure-left').style.transform = '';
            document.getElementById('figure-right').style.transform = '';
            document.getElementById('connection-bridge').style.width = '0px';
            document.getElementById('connection-bridge').style.opacity = 0;

            // Box 9
            document.getElementById('flourishing-tree-trunk').style.transform = 'scale(0.8)';
            document.getElementById('flourishing-tree-trunk').style.opacity = 0;
            document.getElementById('flourishing-tree-leaves').style.transform = 'scale(0.8)';
            document.getElementById('flourishing-tree-leaves').style.opacity = 0;
        }

        function updateFlowchart() {
            // Remove highlight from all boxes and arrows first
            document.querySelectorAll('.flow-box').forEach(box => box.classList.remove('highlight'));
            document.querySelectorAll('.flow-arrow').forEach(arrow => {
                arrow.classList.remove('highlight');
                arrow.style.stroke = 'var(--text-medium)';
            });
            // Reset arrowhead color
            arrowheadPolygon.style.fill = 'var(--text-medium)';

            // Reset all icon animations before applying new ones
            resetAnimations();

            currentStepNumber.textContent = currentStep;

            if (currentStep === 0) {
                emotionalCompetencyLogText.innerHTML = '<p>Welcome to the Emotional Intelligence Protocol Dashboard. This system analyzes the development and application of emotional competencies.</p><p>Use the navigation controls below to observe each stage, from understanding your own feelings to fostering deeply connected and flourishing relationships.</p><p><strong>Status:</strong> Awaiting Diagnostic Input.</p>';
            } else {
                const currentPhase = flowchartBoxes[currentStep];
                // Highlight the current box
                const currentBox = document.getElementById(currentPhase.id);
                currentBox.classList.add('highlight');
                
                // Highlight the arrow *leading to* this step (if defined)
                if (currentPhase.arrow) {
                    const arrowElement = document.getElementById(currentPhase.arrow);
                    arrowElement.classList.add('highlight');
                    arrowElement.style.stroke = 'var(--glow-blue)'; // Set arrow color
                    arrowheadPolygon.style.fill = 'var(--glow-blue)'; // Set arrowhead color
                }
                emotionalCompetencyLogText.innerHTML = currentPhase.description;

                // Trigger specific animations for the highlighted box's icon
                switch(currentPhase.id) {
                    case 'box-1':
                        document.getElementById('emotion-happy').style.opacity = 1;
                        document.getElementById('emotion-sad').style.opacity = 1;
                        break;
                    case 'box-2':
                        break;
                    case 'box-3':
                        break;
                    case 'box-4':
                        break;
                    case 'box-5':
                        break;
                    case 'box-6':
                        document.getElementById('listening-ear').style.opacity = 1; // Makes it visible to start animation
                        document.getElementById('expanding-thought').style.opacity = 1; // Ensures it is visible when animation starts
                        break;
                    case 'box-7':
                        document.getElementById('harmony-symbol').style.opacity = 1; // Makes it visible for animation
                        break;
                    case 'box-8':
                        document.getElementById('connection-bridge').style.opacity = 1; // Makes it visible for animation
                        break;
                    case 'box-9':
                        document.getElementById('flourishing-tree-trunk').style.opacity = 1; // Make visible for animation
                        document.getElementById('flourishing-tree-leaves').style.opacity = 1; // Make visible for animation
                        break;
                }
            }

            // Update button states
            prevBtn.disabled = currentStep === 0;
            nextBtn.disabled = currentStep === totalSteps;
        }

        nextBtn.addEventListener('click', () => {
            if (currentStep < totalSteps) {
                currentStep++;
                updateFlowchart();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                updateFlowchart();
            }
        });

        document.addEventListener('DOMContentLoaded', updateFlowchart);
    </script>
</body>
</html>
